<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Credits - Syntra</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Geist:wght@100..900&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --radius: 0.875rem;
        --primary: oklch(0.98 0 0);
        --primary-foreground: oklch(0.12 0 0);
        --secondary: oklch(0.22 0 0);
        --secondary-foreground: oklch(0.98 0 0);
        --accent: oklch(0.25 0 0);
        --accent-foreground: oklch(0.98 0 0);
        --background: oklch(0.12 0 0);
        --foreground: oklch(0.98 0 0);
        --card: oklch(0.18 0 0);
        --card-foreground: oklch(0.98 0 0);
        --popover: oklch(0.24 0 0);
        --popover-foreground: oklch(0.98 0 0);
        --muted: oklch(0.2 0 0);
        --muted-foreground: oklch(0.65 0 0);
        --destructive: oklch(0.65 0.25 25);
        --destructive-foreground: oklch(0.98 0 0);
        --border: oklch(1 0 0 / 0.12);
        --input: oklch(1 0 0 / 0.18);
        --ring: oklch(0.6 0 0);
        --sidebar: oklch(0.15 0 0);
        --sidebar-foreground: oklch(0.98 0 0);
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: 'Geist', sans-serif;
        background-color: var(--background);
        color: var(--foreground);
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        height: 100vh;
        overflow: hidden;
      }

      .app-container {
        display: grid;
        grid-template-columns: 16rem 1fr;
        height: 100vh;
        position: relative;
        transition: grid-template-columns 300ms cubic-bezier(0.4, 0, 0.2, 1);
      }

      .app-container.sidebar-collapsed {
        grid-template-columns: 0 1fr;
      }

      @keyframes slideInLeft {
        from {
          opacity: 0;
          transform: translateX(-2rem);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(2rem);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      .sidebar {
        background-color: var(--sidebar);
        padding: 1rem;
        display: flex;
        flex-direction: column;
        transition: all 300ms cubic-bezier(0.4, 0, 0.2, 1);
        z-index: 100;
        border-right: 1px solid var(--border);
        overflow: hidden;
        animation: slideInLeft 600ms cubic-bezier(0.4, 0, 0.2, 1);
      }

      .sidebar.hidden {
        padding: 0;
        border-right: none;
      }

      .sidebar-overlay {
        position: fixed;
        inset: 0;
        background-color: #00000080;
        z-index: 99;
        opacity: 0;
        pointer-events: none;
        transition: opacity 300ms cubic-bezier(0.4, 0, 0.2, 1);
        display: none;
      }

      .sidebar-overlay.visible {
        opacity: 1;
        pointer-events: auto;
      }

      .sidebar-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0.75rem;
        margin-bottom: 2rem;
      }

      .symbol {
        width: 100%;
        max-width: 50px;
        height: auto;
        margin-top: -16px;
        margin-bottom: -33px;
      }

      .nav-section {
        display: flex;
        flex-direction: column;
        gap: 0.25rem;
      }

      .nav-item {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        padding: 0.625rem 0.75rem;
        border-radius: calc(var(--radius) - 0.25rem);
        cursor: pointer;
        transition: all 200ms cubic-bezier(0.4, 0, 0.2, 1);
        color: var(--sidebar-foreground);
        font-size: 0.9375rem;
        text-decoration: none;
        position: relative;
        opacity: 0;
        animation: fadeInUp 400ms forwards;
        animation-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
      }

      .nav-item:nth-child(1) {
        animation-delay: 200ms;
      }
      .nav-item:nth-child(2) {
        animation-delay: 300ms;
      }
      .nav-item:nth-child(3) {
        animation-delay: 400ms;
      }
      .nav-item:nth-child(4) {
        animation-delay: 500ms;
      }

      .nav-item svg {
        width: 1.25rem;
        height: 1.25rem;
        flex-shrink: 0;
        transition: transform 200ms cubic-bezier(0.4, 0, 0.2, 1);
      }

      .nav-item:hover {
        background-color: var(--muted);
      }

      .nav-item:hover svg {
        transform: scale(1.1);
      }

      .nav-item.active {
        background-color: var(--accent);
        color: var(--primary);
      }

      .nav-item:active {
        transform: scale(0.98);
      }

      .sidebar-footer {
        margin-top: auto;
        display: flex;
        flex-direction: column;
        gap: 0.75rem;
        padding-top: 1rem;
        border-top: 1px solid var(--border);
        opacity: 0;
        animation: fadeInUp 600ms 700ms forwards;
      }

      .status-indicator {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.5rem 0.75rem;
        background-color: var(--muted);
        border-radius: calc(var(--radius) - 0.25rem);
        font-size: 0.875rem;
        transition: all 200ms cubic-bezier(0.4, 0, 0.2, 1);
        justify-content: center;
        cursor: pointer;
        position: relative;
      }

      .status-indicator:hover {
        background-color: var(--accent);
        transform: translateY(-1px);
      }

      .status-indicator:active {
        transform: translateY(0) scale(0.98);
      }

      .status-indicator svg {
        width: 1rem;
        height: 1rem;
        color: var(--muted-foreground);
        flex-shrink: 0;
        transition: all 200ms cubic-bezier(0.4, 0, 0.2, 1);
      }

      .status-indicator.loading svg {
        animation: spin 1s linear infinite;
      }

      @keyframes spin {
        from {
          transform: rotate(0deg);
        }
        to {
          transform: rotate(360deg);
        }
      }

      .status-indicator:hover svg {
        color: var(--foreground);
        transform: scale(1.1);
      }

      .status-tooltip {
        position: absolute;
        bottom: 100%;
        left: 50%;
        transform: translateX(-50%) translateY(-0.5rem);
        background-color: var(--popover);
        color: var(--popover-foreground);
        padding: 0.5rem 0.75rem;
        border-radius: calc(var(--radius) - 0.25rem);
        font-size: 0.75rem;
        white-space: nowrap;
        pointer-events: none;
        opacity: 0;
        transition: all 200ms cubic-bezier(0.4, 0, 0.2, 1);
        border: 1px solid var(--border);
        box-shadow: 0 4px 12px #0000004d;
        z-index: 1000;
      }

      .status-indicator:hover .status-tooltip {
        opacity: 1;
        transform: translateX(-50%) translateY(-0.75rem);
      }

      .status-badge {
        display: flex;
        align-items: center;
        gap: 0.375rem;
        padding: 0.25rem 0.5rem;
        border-radius: 9999px;
        font-size: 0.8125rem;
        font-weight: 500;
        transition: all 300ms cubic-bezier(0.4, 0, 0.2, 1);
      }

      .status-badge.updating {
        animation: badgePulse 600ms cubic-bezier(0.4, 0, 0.2, 1);
      }

      @keyframes badgePulse {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
      }

      .status-badge.good {
        background-color: #22c55e26;
        color: #22c55e;
      }

      .status-badge.medium {
        background-color: #eab30826;
        color: #eab308;
      }

      .status-badge.bad {
        background-color: #ef444426;
        color: #ef4444;
      }

      .status-badge.offline {
        background-color: #9ca3af26;
        color: #9ca3af;
      }

      .status-dot {
        width: 0.5rem;
        height: 0.5rem;
        border-radius: 50%;
        animation: pulse-dot 2s ease-in-out infinite;
      }

      .status-badge.good .status-dot {
        background-color: #22c55e;
        box-shadow: 0 0 8px #22c55e80;
      }

      .status-badge.medium .status-dot {
        background-color: #eab308;
        box-shadow: 0 0 8px #eab30880;
      }

      .status-badge.bad .status-dot {
        background-color: #ef4444;
        box-shadow: 0 0 8px #ef444480;
      }

      .status-badge.offline .status-dot {
        background-color: #9ca3af;
        animation: none;
      }

      @keyframes pulse-dot {
        0%,
        100% {
          opacity: 1;
          transform: scale(1);
        }
        50% {
          opacity: 0.6;
          transform: scale(0.95);
        }
      }

      .footer-actions {
        display: flex;
        gap: 0.5rem;
      }

      .footer-btn {
        flex: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 0.625rem;
        border-radius: calc(var(--radius) - 0.25rem);
        background-color: var(--card);
        border: 1px solid var(--border);
        cursor: pointer;
        transition: all 200ms cubic-bezier(0.4, 0, 0.2, 1);
        text-decoration: none;
      }

      .footer-btn svg {
        width: 1.25rem;
        height: 1.25rem;
        color: var(--foreground);
      }

      .footer-btn:hover {
        background-color: var(--muted);
        border-color: var(--primary);
        transform: translateY(-1px);
      }

      .footer-btn:active {
        transform: scale(0.95);
      }

      .footer-btn.active {
        background-color: var(--accent);
        border-color: var(--primary);
      }

      .content-wrapper {
        overflow: hidden;
        background-color: var(--sidebar);
        padding: 1rem;
        display: flex;
        flex-direction: column;
        transition: padding 300ms cubic-bezier(0.4, 0, 0.2, 1);
        min-width: 0;
      }

      .frameContainer {
        position: relative;
        flex: 1;
        background-color: var(--background);
        border-radius: var(--radius);
        overflow: hidden;
        opacity: 0;
        animation: fadeIn 800ms 300ms forwards;
      }

      .sidebar-toggle {
        width: 2.5rem;
        height: 2.5rem;
        border: 1px solid var(--border);
        border-radius: calc(var(--radius) - 0.25rem);
        background-color: var(--card);
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 200ms cubic-bezier(0.4, 0, 0.2, 1);
        position: absolute;
        top: 1rem;
        left: 1rem;
        z-index: 200;
      }

      .sidebar-toggle:hover {
        background-color: var(--muted);
        border-color: var(--primary);
        transform: translateY(-1px);
      }

      .sidebar-toggle:active {
        transform: scale(0.95);
      }

      .sidebar-toggle svg {
        width: 1.25rem;
        height: 1.25rem;
        color: var(--foreground);
        transition: transform 300ms cubic-bezier(0.4, 0, 0.2, 1);
      }

      .sidebar-toggle.active svg {
        transform: rotate(180deg);
      }

      #frame {
        width: 100%;
        height: 100%;
        border: none;
        display: block;
      }

      body,
      .chat-container {
        scrollbar-width: thin;
        scrollbar-color: var(--muted) transparent;
      }

      body::-webkit-scrollbar,
      .chat-container::-webkit-scrollbar {
        width: 8px;
      }

      body::-webkit-scrollbar-track,
      .chat-container::-webkit-scrollbar-track {
        background: transparent;
      }

      body::-webkit-scrollbar-thumb,
      .chat-container::-webkit-scrollbar-thumb {
        background: var(--muted);
        border-radius: 4px;
      }

      body::-webkit-scrollbar-thumb:hover,
      .chat-container::-webkit-scrollbar-thumb:hover {
        background: var(--ring);
      }

      @media (max-width: 768px) {
        .app-container {
          display: block;
        }

        .sidebar {
          position: fixed;
          left: 0;
          top: 0;
          height: 100vh;
          transform: translateX(-100%);
          transition: transform 300ms cubic-bezier(0.4, 0, 0.2, 1);
          z-index: 101;
          width: 16rem;
        }

        .sidebar.open {
          transform: translateX(0);
        }

        .sidebar.hidden {
          width: 16rem;
          transform: translateX(-100%);
          padding: 1rem;
        }

        .sidebar-overlay {
          display: block;
        }

        .content-wrapper {
          padding: 0.5rem;
        }

        .sidebar-toggle {
          top: 0.75rem;
          left: 0.75rem;
        }
      }
    </style>
  </head>
  <body>
    <div class="sidebar-overlay" id="sidebarOverlay"></div>
    <div class="app-container" id="appContainer">
      <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
          <svg
            class="symbol"
            width="1024"
            height="1424"
            viewBox="0 0 315 121"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path d="m2.93 26.228 13.922-9.792v43.365L2.931 56.653z" fill="#fff" />
            <path d="m2.93 56.653 7.776-10.141 50.108 32.042-13.733 7.825z" fill="#fff" />
            <path
              d="M46.893 86.705v-5.493l13.921-2.654v35.997L42.863 121l3.297-16.436z"
              fill="#fff"
            />
            <path
              d="M0 94.772V79.384l46.16 25.529L42.863 121zM70.34 72.74v-2.098l16.485-5.945-.367 31.474-16.119 7.873z"
              fill="#fff"
            />
            <path d="m26.377 43.015 10.706-10.492 49.742 32.173-13.367 7.694z" fill="#fff" />
            <path d="M26.377 9.442 43.596 0l-1.832 46.512-15.387-3.498z" fill="#fff" />
            <path d="M41.764 10.841h4.396l-3.663 2.098-.733 3.497z" fill="#fff" />
            <path
              d="M31.506 10.142 43.596 0l41.03 25.879v15.037zm75.682 90.483q1.438.938 3.124 1.656 1.689.719 3.5 1.188 1.845.468 3.75.687 1.907.25 3.782.25 6.375 0 9.812-2.75 3.47-2.718 3.469-8.187v-1.25a19 19 0 0 1-2.75 1.562q-1.5.688-3.25 1.188a27 27 0 0 1-3.656.781q-1.907.25-3.875.25-4.22 0-7.563-1.219-3.312-1.25-5.625-3.625-2.281-2.406-3.5-5.906t-1.218-8V59.125h9.218v15.563q0 6.688 2.532 9.874Q117.5 87.72 123 87.72q3.875 0 6.844-1.344 3-1.375 4.781-3.5v-23.75h9.25v32.656q0 5.281-1.5 9.157-1.5 3.906-4.375 6.468-2.844 2.563-7 3.813-4.156 1.281-9.438 1.281-5.156 0-9.624-1.094-4.47-1.093-8.188-2.968zm48.656-41.5h9.25v3.125q3.687-2.094 7.031-2.937 3.375-.844 6.594-.844 4.218 0 7.812 1.25 3.594 1.218 6.219 3.656 2.625 2.437 4.094 6.094 1.5 3.625 1.5 8.406V96h-9.219V79.375q0-3.03-.875-5.406-.843-2.406-2.469-4.031-1.593-1.657-3.906-2.5-2.281-.876-5.125-.876-1.5 0-3.094.313-1.562.312-3.094.906-1.5.562-2.906 1.438a14.8 14.8 0 0 0-2.562 1.937V96h-9.25zm59.437 6.938h-8.906v-6.938h8.906V47.656h9.25v11.469h8.907v6.938h-8.907V96h-9.25zm26.375-6.938h9.25v5.313a40.3 40.3 0 0 1 6.469-3.938q3.406-1.656 6.781-2.531l2.719 8.468q-5.344.532-9.406 2.407-4.031 1.844-6.563 5.219V96h-9.25zm30.375 25.25q0-2.655 1.157-4.844 1.156-2.187 3.468-3.75 2.313-1.594 5.75-2.437 3.469-.875 8.063-.875 3.406 0 7.156.5 3.782.5 7.781 1.531a7.3 7.3 0 0 0-1.062-3.219q-.906-1.5-2.532-2.562-1.594-1.095-3.874-1.688-2.25-.594-5.126-.594-1.562 0-3.437.188a45.7 45.7 0 0 0-7.844 1.5 25.6 25.6 0 0 0-3.625 1.344l-2.812-7.594q2.094-.75 4.468-1.375 2.407-.625 4.907-1.062a59 59 0 0 1 5-.72 49 49 0 0 1 4.843-.25q10.344 0 15.376 5.282 5.031 5.28 5.031 16.188V96h-9.25v-3.469a30 30 0 0 1-3.157 1.594 27 27 0 0 1-3.687 1.313 31.5 31.5 0 0 1-4.313.874q-2.28.344-4.843.344-4.313 0-7.594-.937-3.25-.938-5.437-2.594t-3.313-3.875q-1.094-2.25-1.094-4.875m9.75-.312q0 .906.469 1.75.468.811 1.5 1.468 1.031.625 2.625 1.031 1.625.376 3.906.376 2.438 0 4.719-.438a27.5 27.5 0 0 0 4.25-1.156 21.7 21.7 0 0 0 3.562-1.656q1.594-.938 2.657-1.938v-1.625a54 54 0 0 0-4.219-1 50 50 0 0 0-3.969-.625 47 47 0 0 0-3.562-.344 52 52 0 0 0-2.907-.094q-2.593 0-4.312.344-1.719.345-2.781.938-1.064.563-1.5 1.344a3.3 3.3 0 0 0-.438 1.624"
              fill="#fff"
            />
          </svg>
        </div>

        <nav class="nav-section" id="navigation">
          <a href="/" class="nav-item" data-page="home">
            <i data-lucide="home"></i>
            <span>Home</span>
          </a>
          <a href="/games" data-page="games" class="nav-item">
            <i data-lucide="gamepad-2"></i>
            <span>Games</span>
          </a>
          <a href="/ai" class="nav-item" data-page="ai">
            <i data-lucide="cpu"></i>
            <span>AI</span>
          </a>
          <a href="/credits" class="nav-item active" data-page="credits">
            <i data-lucide="circle-user-round"></i>
            <span>Credits</span>
          </a>
        </nav>

        <div class="sidebar-footer">
          <div class="status-indicator" id="statusIndicator">
            <div class="status-tooltip" id="statusTooltip">Click to refresh</div>
            <i data-lucide="wifi"></i>
            <div class="status-badge good" id="pingBadge">
              <div class="status-dot"></div>
              <span id="pingDisplay">0ms</span>
            </div>
          </div>
          <div class="footer-actions">
            <a href="/settings" class="footer-btn" aria-label="Settings" data-page="settings">
              <i data-lucide="settings"></i>
            </a>
            <a
              href="https://dsc.gg/syntra21k"
              target="_blank"
              rel="noopener noreferrer"
              class="footer-btn"
              aria-label="Discord"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="21"
                height="21"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="1.72"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path
                  d="M18.894 4.344C17.518 3.715 16.057 3.256 14.532 3c-.192.33-.405.778-.554 1.13-1.622-.234-3.233-.234-4.833 0-.149-.352-.372-.8-.565-1.13-1.525.256-2.987.715-4.353 1.344C1.463 8.419.716 12.397 1.09 16.323c1.834 1.333 3.605 2.144 5.345 2.677.426-.576.81-1.195 1.14-1.845-.629-.235-1.226-.523-1.802-.865.149-.106.299-.223.437-.34 3.478 1.59 7.244 1.59 10.679 0 .149.117.288.234.437.34-.576.342-1.173.63-1.802.865.33.65.714 1.269 1.14 1.845 1.74-.533 3.51-1.344 5.345-2.677.467-4.543-.718-8.49-3.107-11.979zM8.056 13.901c-1.045 0-1.899-.949-1.899-2.112 0-1.162.832-2.111 1.899-2.111 1.056 0 1.92.949 1.898 2.111 0 1.163-.842 2.112-1.898 2.112zm7.009 0c-1.045 0-1.899-.949-1.899-2.112 0-1.162.833-2.111 1.899-2.111 1.056 0 1.92.949 1.899 2.111 0 1.163-.843 2.112-1.899 2.112z"
                />
              </svg>
            </a>
          </div>
        </div>
      </aside>

      <main class="content-wrapper">
        <div class="frameContainer">
          <button class="sidebar-toggle" id="sidebarToggle" aria-label="Toggle sidebar">
            <i data-lucide="panel-left"></i>
          </button>
          <iframe
            id="frame"
            src="https://script.google.com/macros/s/AKfycbyTFP21CTa7bIGK0od6Pnd7QLhcW2KOm8UFDWPehhW3BkT9M9UhmCm-kaHzT-_A_gediw/exec"
            title="Credits"
            allowfullscreen
          ></iframe>
        </div>
      </main>
    </div>

    <script src="https://unpkg.com/lucide@latest"></script>
    <script>
      (() => {
        function applyCloakFromStorage() {
          try {
            const saved = localStorage.getItem('cloak_settings');
            if (!saved) return;

            const settings = JSON.parse(saved);
            document.title = settings.title;

            let link = document.querySelector("link[rel~='icon']");
            if (!link) {
              link = document.createElement('link');
              link.rel = 'icon';
              document.head.appendChild(link);
            }
            link.href = settings.icon;

            const observer = new MutationObserver(() => {
              if (document.title !== settings.title) {
                document.title = settings.title;
              }
              if (link.href !== settings.icon) {
                link.href = settings.icon;
              }
            });

            observer.observe(document.querySelector('head'), {
              childList: true,
              subtree: true,
              attributes: true,
              attributeFilter: ['href'],
            });

            const titleObserver = new MutationObserver(() => {
              if (document.title !== settings.title) {
                document.title = settings.title;
              }
            });

            const titleEl = document.querySelector('title');
            if (titleEl) {
              titleObserver.observe(titleEl, {
                childList: true,
                characterData: true,
              });
            }
          } catch (error) {
            console.error('Failed to apply cloak:', error);
          }
        }

        if (document.readyState === 'loading') {
          document.addEventListener('DOMContentLoaded', applyCloakFromStorage);
        } else {
          applyCloakFromStorage();
        }
      })();

      const sidebar = document.getElementById('sidebar');
      const container = document.getElementById('appContainer');
      const sidebarToggle = document.getElementById('sidebarToggle');
      const sidebarOverlay = document.getElementById('sidebarOverlay');

      let isSidebarVisible = true;
      const isMobile = () => window.innerWidth <= 768;

      function toggleSidebar() {
        isSidebarVisible = !isSidebarVisible;

        if (isMobile()) {
          sidebar.classList.toggle('open', isSidebarVisible);
          sidebarOverlay.classList.toggle('visible', isSidebarVisible);
        } else {
          container.classList.toggle('sidebar-collapsed', !isSidebarVisible);
          sidebar.classList.toggle('hidden', !isSidebarVisible);
          sidebarToggle.classList.toggle('active', !isSidebarVisible);
        }
      }

      sidebarToggle.addEventListener('click', toggleSidebar);
      sidebarOverlay.addEventListener('click', () => {
        if (isSidebarVisible) toggleSidebar();
      });

      const navItems = document.querySelectorAll('.nav-item');

      function getCurrentRoute() {
        return window.location.hash.slice(1) || null;
      }

      function updateNavHighlight() {
        const currentRoute = getCurrentRoute();
        navItems.forEach((item) => {
          const href = item.getAttribute('href') || item.getAttribute('data-route');
          const cleanHref = href?.replace(/^#/, '');
          item.classList.toggle(
            'active',
            cleanHref === currentRoute || (!currentRoute && cleanHref === '')
          );
        });
      }

      navItems.forEach((item) => {
        item.addEventListener('click', () => {
          if (isMobile() && isSidebarVisible) toggleSidebar();
        });
      });

      updateNavHighlight();
      window.addEventListener('hashchange', updateNavHighlight);

      function getPingStatus(ping) {
        if (ping < 100) return 'good';
        if (ping < 200) return 'medium';
        return 'bad';
      }

      let lastUpdateTime = Date.now();
      let isUpdating = false;

      function animateNumber(element, start, end, duration = 400) {
        const range = end - start;
        const startTime = performance.now();

        function step(currentTime) {
          const elapsed = currentTime - startTime;
          const progress = Math.min(elapsed / duration, 1);
          const eased = 1 - (1 - progress) ** 3;
          const currentValue = Math.round(start + range * eased);
          element.textContent = `${currentValue}ms`;

          if (progress < 1) requestAnimationFrame(step);
        }

        requestAnimationFrame(step);
      }

      function updatePing(manual = false) {
        if (isUpdating) return;
        isUpdating = true;

        const pingDisplay = document.getElementById('pingDisplay');
        const pingBadge = document.getElementById('pingBadge');
        const statusIndicator = document.getElementById('statusIndicator');
        const statusTooltip = document.getElementById('statusTooltip');
        const currentPing = parseInt(pingDisplay.textContent, 10) || 0;

        statusIndicator.classList.add('loading');
        const start = performance.now();

        fetch(window.location.origin, {
          method: 'HEAD',
          cache: 'no-cache',
        })
          .then(() => {
            const newPing = Math.round(performance.now() - start);
            const status = getPingStatus(newPing);

            setTimeout(() => {
              animateNumber(pingDisplay, currentPing, newPing);
              pingBadge.className = `status-badge ${status}`;
              pingBadge.classList.add('updating');

              setTimeout(() => pingBadge.classList.remove('updating'), 600);

              statusIndicator.classList.remove('loading');
              lastUpdateTime = Date.now();
              isUpdating = false;

              if (manual) {
                statusTooltip.textContent = 'Updated just now';
                setTimeout(updateTooltipText, 2000);
              } else {
                updateTooltipText();
              }
            }, 200);
          })
          .catch(() => {
            pingDisplay.textContent = 'Offline';
            pingBadge.className = 'status-badge offline';
            statusIndicator.classList.remove('loading');
            isUpdating = false;
            lastUpdateTime = Date.now();
            updateTooltipText();
          });
      }

      function updateTooltipText() {
        const statusTooltip = document.getElementById('statusTooltip');
        const secondsAgo = Math.floor((Date.now() - lastUpdateTime) / 1000);

        if (secondsAgo < 5) {
          statusTooltip.textContent = 'Click to refresh';
        } else if (secondsAgo < 60) {
          statusTooltip.textContent = `Updated ${secondsAgo}s ago • Click to refresh`;
        } else {
          const minutesAgo = Math.floor(secondsAgo / 60);
          statusTooltip.textContent = `Updated ${minutesAgo}m ago • Click to refresh`;
        }
      }

      document.getElementById('statusIndicator').addEventListener('click', () => updatePing(true));

      updatePing();
      setInterval(updatePing, 5000);
      setInterval(updateTooltipText, 1000);

      if (typeof lucide !== 'undefined') {
        lucide.createIcons();
      }
    </script>
  </body>
</html>
